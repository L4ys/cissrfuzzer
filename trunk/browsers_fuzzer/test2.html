<html>
<head>
<script src="firefox_interface.js" type="text/javascript"></script>
<script src="webkit_interface.js" type="text/javascript"></script>
<script src="jquery/jquery.js" type="text/javascript"></script>
<script src="some_function.js" type="text/javascript"></script>
<script src="variable.js" type="text/javascript"></script>
<script src="func.js" type="text/javascript"></script>
<script src="attr.js" type="text/javascript"></script>
<script src="attr_func.js" type="text/javascript"></script>
<script src="clas.js" type="text/javascript"></script>
<script src="firefox_test.js" type="text/javascript"></script>
<script src="webkit_test.js" type="text/javascript"></script>
<script src="htmlcollection.js" type="text/javascript"></script>
<script src="document.js" type="text/javascript"></script>
<script src="navigator.js" type="text/javascript"></script>
<script src="location.js" type="text/javascript"></script>
<script src="barprop.js" type="text/javascript"></script>
<script src="applicationCache.js" type="text/javascript"></script>
<script src="history.js" type="text/javascript"></script>
<script src="htmlelement.js" type="text/javascript"></script>
<script src="htmlheadelement.js" type="text/javascript"></script>
<script src="element.js" type="text/javascript"></script>
<script src="node.js" type="text/javascript"></script>
<script src="nodelist.js" type="text/javascript"></script>
<script src="namednodemap.js" type="text/javascript"></script>
<script src="documenttype.js" type="text/javascript"></script>
<script src="domimplementation.js" type="text/javascript"></script>
<script src="window.js" type="text/javascript"></script>
<script src="configure.js" type="text/javascript"></script>
<script src="html_files.js" type="text/javascript"></script>
<script type="text/javascript">
	var run_code_text = "";
	var i_code_text = "";
////////////////////////////////////////////////////
	var text_firefox = "";
	var text_webkit = "";
	/* Выполняем случайный запрос для firefox */
	function get_firefox()
	{
		x = Math.floor(Math.random()*(firefox_j+1));
		text_firefox = "var xyz" + x + " = new " +  firefox_class[x].name + "(); \n"; //объект
		var all_at = firefox_class[x].get_attribute();
		for (var y = 0; y < all_at.length; y++)
		{
		text_firefox += "xyz" + x + all_at[y] + " \n";		//атрибуты
		}
		var all_fun = firefox_class[x].get_function();
		for (var y = 0; y < all_fun.length; y++)
		{
		text_firefox += "xyz" + x + all_fun[y] + " \n";	// функции
		}	
		i_code_text = text_firefox;
		return "xyz" + x;
	}
	/* Выполняем случайный запрос для webkit */	
	function get_webkit()
	{
		x = Math.floor(Math.random()*(webkit_j+1));
		text_webkit = "var xyz" + x + " = new " +  webkit_class[x].name + "(); \n"; //объект
		var all_at_2 = webkit_class[x].get_attribute();
		for (var y = 0; y < all_at_2.length; y++)
		{
		text_webkit += "xyz" + x + all_at_2[y] + " \n";		//атрибуты
		}
		var all_fun_2 = webkit_class[x].get_function();
		for (var y = 0; y < all_fun_2.length; y++)
		{
		text_webkit += "xyz" + x + all_fun_2[y] + " \n";	// функции
		}
		i_code_text = text_webkit;
		return "xyz" + x;		
	}	

	function get_xyz()
	{
		var return_xyz = "";
		if (browser == "webkit") {
			return_xyz = get_webkit();
		}
		if (browser == "firefox") {
			return_xyz = get_firefox();
		}		
		return return_xyz;
	}
///////////////////////////////////////////////////////
	big_window = new window_();
	big_window.init_name("window");
	big_window.generate();
	

	var array_of_windows = [];
	
	if ( run_all ) {
		for (var j = 0; j < run.length ; j++) 
			run[j] = true;
	}	// переписать через  if (run[1] || run_all)
	
	var c=0; // количество открытых вкладок (переменное)
	
	
	for ( var i = 0; i<number_of_tabs  ; i++)
	{
	
		run_code_text = "";
		
		//как то изменяем run_code_text
		if (run[0])
		{
			var local_xyz = get_xyz();
			run_code_text += i_code_text;
			var y = Math.floor(Math.random()*(11));
			var small_element = new element_();
			small_element.generate();
			run_code_text += "document.documentElement";
			for (var j = 0; j < y; j++)
			{
			run_code_text += "." + small_element.random_node();
			}
			run_code_text += " = " + local_xyz + "; \n";
		}
		if (run[1])
		{		
			//некая функция. Взял из примера
			run_code_text += " HTMLElement.prototype.fuct_name84 = function() { if (window.layoutTestController) {     layoutTestController.keepWebHistory(); \n    layoutTestController.waitUntilDone(); \n }	document.location = \"resources/redirect-target.html#1\"; \n }; \n";
			
			var y = Math.floor(Math.random()*(11));
			var small_element = new element_();
			small_element.generate();
			run_code_text += "document.documentElement";
			for (var j = 0; j < y; j++)
			{
			run_code_text += "." + small_element.random_node();
			}			
			run_code_text += ".fuct_name84(); \n";
		}
		if (run[2])
		{
			run_code_text += " fuct_name_event18 = function() { try { \n /** \n  * @name: S10.1.5_A1.2_T4; \n  * @section: 10.1.5, 15.1; \n * @assertion: Global \n  object has properties such as built-in objects such as \n  * Math, String, Date, parseInt, etc; \n * @description: Function execution context - Other Properties; \n */ \n function test() { \n   //CHECK#27 \n   if ( Math === null ) { \n     testFailed(\#27: Math === null\"); \n   } \n } \n test(); \n } catch (ex) {     sputnikException = ex; \n } \n var successfullyParsed = true; \n }; \n ";			

			var y = Math.floor(Math.random()*(11));
			var small_element = new element_();
			small_element.generate();
			run_code_text += "document.documentElement";
			for (var j = 0; j < y; j++)
			{
			run_code_text += "." + small_element.random_node();
			}		
			run_code_text += "." + big_window.all_atr_func[randint(big_window.all_atr_func)].name;
			
			run_code_text += " = fuct_name_event18;\n";				
		}
		if (run[3])
		{	
			var local_xyz = get_xyz();
			run_code_text += i_code_text;
			run_code_text += " document.getElementsByTagName(\"" + tags[randint(tags)] + "\") = " + local_xyz + "; \n";
		}
		if (run[4])
		{		
			var local_xyz = get_xyz();
			run_code_text += i_code_text;
			run_code_text += " document.getElementsByTagName(\"" + tags[randint(tags)] + "\").setAttribute(" + local_xyz + "); \n";		
		}
		if (run[5])
		{	
			var y = Math.floor(Math.random()*(11));
			var small_element = new element_();
			small_element.generate();
			run_code_text += "document.documentElement";
			for (var j = 0; j < y; j++)
			{
			run_code_text += "." + small_element.random_node();
			}		
			run_code_text += ".innerHTML = \"<include src=html/" + html_files[randint(html_files)] + "></include>\";\n";
		}
		if (run[6])
		{		
			run_code_text += "var xyzNS = document.createElementNS(\"http://www.w3.org/1999/xhtml\", \"" + tags[randint(tags)] + "\"); \n";
			var y = Math.floor(Math.random()*(11));
			var small_element = new element_();
			small_element.generate();
			run_code_text += "document.documentElement";
			for (var j = 0; j < y; j++)
			{
			run_code_text += "." + small_element.random_node();
			};
			run_code_text += ".appendChild( xyzNS ); \n";				

			var y = Math.floor(Math.random()*(11));
			var small_element = new element_();
			small_element.generate();
			run_code_text += "document.documentElement";
			var x_text = "document.documentElement";
			var x = Math.floor(Math.random()*(y));			
			var y_local = "";
			for (var j = 0; j < y; j++)
			{
			y_local = small_element.random_node();
			run_code_text += "." + y_local;
			if (j < x) { x_text += "." + y_local; } ;
			};			
			run_code_text += ".insertBefore( xyzNS, " + x_text + "); \n";
			
			
		
		}
		if (run[7])
		{		
			var local_xyz = get_xyz();
			run_code_text += i_code_text;
			var y = Math.floor(Math.random()*(11));
			var small_element = new element_();
			small_element.generate();
			run_code_text += "document.documentElement";
			for (var j = 0; j < y; j++)
			{
			run_code_text += "." + small_element.random_node();
			};
			run_code_text += ".appendChild(" + local_xyz + "); \n";			
	
		}
		if (run[8])
		{		
			var local_xyz = get_xyz();
			run_code_text += i_code_text;
			var y = Math.floor(Math.random()*(11));
			var small_element = new element_();
			small_element.generate();
			run_code_text += "document.documentElement";
			var x_text = "document.documentElement";
			var x = Math.floor(Math.random()*(y));			
			var y_local = "";
			for (var j = 0; j < y; j++)
			{
			y_local = small_element.random_node();
			run_code_text += "." + y_local;
			if (j < x) { x_text += "." + y_local; } ;
			};			
			run_code_text += ".insertBefore(" + local_xyz + ", " + x_text + "); \n";	
		
		}	
		
		//alert (run_code_text);			

		array_of_windows[c] = window.open("html/" + html_files[randint(html_files)], c, "width=420,height=230,resizable=yes,scrollbars=yes,status=yes");
		array_of_windows[c].eval(run_code_text);
		
		
		c++;		
	
		if ( close_after ) 
			{
				if (c >= number_of_tabs ) {
					//sleep
					pausecomp(1*60*1000);   // в милисекундах
					//close all
					for (var k = 0; k < c; k++) 
						{	
							array_of_windows[k].close();
							//document.write(k);
							//alert(k);
							//array_of_windows[k] = null;
						}
					c=0;
				}
			}
		
		//pausecomp(5000);
		//alert (run_code_text);
	}
	
	//window.close;
	
</script>
</head>
<body>
	
</body>
</html>