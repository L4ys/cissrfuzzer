<html>
<head>
<script src="firefox_interface.js" type="text/javascript"></script>
<script src="webkit_interface.js" type="text/javascript"></script>
<script src="jquery/jquery.js" type="text/javascript"></script>
<script src="some_function.js" type="text/javascript"></script>
<script src="variable.js" type="text/javascript"></script>
<script src="func.js" type="text/javascript"></script>
<script src="attr.js" type="text/javascript"></script>
<script src="clas.js" type="text/javascript"></script>
<script src="firefox_test.js" type="text/javascript"></script>
<script src="webkit_test.js" type="text/javascript"></script>
<script type="text/javascript">
	
	var x = 0;
	var text = "";
	var text_firefox = "";
	var text_webkit = "";
	/* Выполняем случайный запрос для firefox */
	function get_firefox()
	{
		x = Math.floor(Math.random()*(firefox_j+1));
		text_firefox = "var xyz" + x + " = new " +  firefox_class[x].name + "(); \n"; //объект
		var all_at = firefox_class[x].get_attribute();
		for (var y = 0; y < all_at.length; y++)
		{
		text_firefox += "xyz" + x + all_at[y] + " \n";		//атрибуты
		}
		var all_fun = firefox_class[x].get_function();
		for (var y = 0; y < all_fun.length; y++)
		{
		text_firefox += "xyz" + x + all_fun[y] + " \n";	// функции
		}	
	}
	/* Выполняем случайный запрос для webkit */	
	function get_webkit()
	{
		x = Math.floor(Math.random()*(webkit_j+1));
		text_webkit = "var xyz" + x + " = new " +  webkit_class[x].name + "(); \n"; //объект
		var all_at_2 = webkit_class[x].get_attribute();
		for (var y = 0; y < all_at_2.length; y++)
		{
		text_webkit += "xyz" + x + all_at_2[y] + " \n";		//атрибуты
		}
		var all_fun_2 = webkit_class[x].get_function();
		for (var y = 0; y < all_fun_2.length; y++)
		{
		text_webkit += "xyz" + x + all_fun_2[y] + " \n";	// функции
		}	
	}	
	/* Creat window and run code */
	function run()
	{
		var newWin = window.open( $("#url").val(), "JSSite");
		if ( $(":radio[name=browser]").filter(":checked").val() == "firefox") {text = text_firefox;};
		if ( $(":radio[name=browser]").filter(":checked").val() == "webkit") {text = text_webkit;};		
		newWin.eval(text);		
		newWin.focus();		
	}
	function update()
	{
		if ( $(":radio[name=browser]").filter(":checked").val() == "firefox") {get_firefox(); text = text_firefox;};
		if ( $(":radio[name=browser]").filter(":checked").val() == "webkit") {get_webkit(); text = text_webkit;};
		$("#code").val(text);
	}

</script>
</head>
<body>
	<form>
	<input type=radio name="browser" value="firefox" checked > Firefox
	<br>
	<input type=radio name="browser" value="webkit" > Webkit
	<br>
	<input type=button value="Update" onClick="update()">
	<br>
	<textarea id=code cols="52" rows="15"></textarea>
	<br>
	URL: <input type=text id="url" SIZE=60 >
	<br>
	<input type=button value="Run" onClick="run()">
	</form>	
</body>
</html>