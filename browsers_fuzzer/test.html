<html>
<head>
<script src="firefox_interface.js" type="text/javascript"></script>
<script src="webkit_interface.js" type="text/javascript"></script>
<script src="jquery/jquery.js" type="text/javascript"></script>
<script src="some_function.js" type="text/javascript"></script>
<script src="variable.js" type="text/javascript"></script>
<script src="func.js" type="text/javascript"></script>
<script src="attr.js" type="text/javascript"></script>
<script src="attr_func.js" type="text/javascript"></script>
<script src="clas.js" type="text/javascript"></script>
<script src="firefox_test.js" type="text/javascript"></script>
<script src="webkit_test.js" type="text/javascript"></script>
<script src="htmlcollection.js" type="text/javascript"></script>
<script src="document.js" type="text/javascript"></script>
<script src="window.js" type="text/javascript"></script>
<script type="text/javascript">
	
	var x = 0;
	var text = "";
	var text_firefox = "";
	var text_webkit = "";
	/* Выполняем случайный запрос для firefox */
	function get_firefox()
	{
		x = Math.floor(Math.random()*(firefox_j+1));
		text_firefox = "var xyz" + x + " = new " +  firefox_class[x].name + "(); \n"; //объект
		var all_at = firefox_class[x].get_attribute();
		for (var y = 0; y < all_at.length; y++)
		{
		text_firefox += "xyz" + x + all_at[y] + " \n";		//атрибуты
		}
		var all_fun = firefox_class[x].get_function();
		for (var y = 0; y < all_fun.length; y++)
		{
		text_firefox += "xyz" + x + all_fun[y] + " \n";	// функции
		}	
	}
	/* Выполняем случайный запрос для webkit */	
	function get_webkit()
	{
		x = Math.floor(Math.random()*(webkit_j+1));
		text_webkit = "var xyz" + x + " = new " +  webkit_class[x].name + "(); \n"; //объект
		var all_at_2 = webkit_class[x].get_attribute();
		for (var y = 0; y < all_at_2.length; y++)
		{
		text_webkit += "xyz" + x + all_at_2[y] + " \n";		//атрибуты
		}
		var all_fun_2 = webkit_class[x].get_function();
		for (var y = 0; y < all_fun_2.length; y++)
		{
		text_webkit += "xyz" + x + all_fun_2[y] + " \n";	// функции
		}	
	}	
	/* Creat window and run code */
	function run()
	{
		var newWin = window.open( $("#url").val(), "JSSite");
		if ( $(":radio[name=browser]").filter(":checked").val() == "firefox") {text = text_firefox;};
		if ( $(":radio[name=browser]").filter(":checked").val() == "webkit") {text = text_webkit;};	
		
		text += "xyz" + x + " = " + $("#result").val() + "; \n";
		
		$("#coderun").val(text);
		newWin.eval(text);		
		newWin.focus();		
	}
	function update()
	{
		if ( $(":radio[name=browser]").filter(":checked").val() == "firefox") {get_firefox(); text = text_firefox;};
		if ( $(":radio[name=browser]").filter(":checked").val() == "webkit") {get_webkit(); text = text_webkit;};
		$("#code").val(text);
	}
	
	var big_window;
	var local_text;
	var local_clas;
	
	var level_id = 1;
	function creat_add()
	{
		big_window = new windows();
		big_window.init_name( $("#level1 option:selected").val() ); //
		$("#result").val($("#level1 option:selected").val());
		
		var html = "<select id=\"level" + (level_id + 1) + "\">";
		for (var i = 0; i < big_window.window_.num_object; i++)
		{
		//
		html += "<option>";
		html += big_window.window_.all_object[i].name;
		html += "</option>";
		//
		}
		html += "</select>";
		html += "<input type=button value=\"Add\" onclick=\"add();\"><br>";
		$("#windows").append(html);
		level_id++;		
		local_clas = big_window.window_;
	}
	
	function add()
	{
		local_clas = local_clas.all_object[local_clas.return_i_clas( $("#level" + level_id + " option:selected").val())];
		// вернуть обект в котором в all_object[ имя взять с левелИ
		var html = "<select id=\"level" + (level_id + 1) + "\">";
		for (var i = 0; i < local_clas.num_object; i++)
		{
		//
		html += "<option>";
		html += local_clas.all_object[i].name;
		html += "</option>";
		//
		}
		html += "</select>";
		html += "<input type=button value=\"Add\" onclick=\"add();\"><br>";
		$("#windows").append(html);
			
		// построить выпадающий список
		$("#result").val( $("#result").val() + "." + $("#level" + level_id +" option:selected").val());
		// добавить в result
		level_id++;			
	}
</script>
</head>
<body>
			<form>
	<table border="1" valign=top>
		<tr>
		<td  id="windows">
			<select id="level1">
				<option>window</option>
				<option>self</option>
				<option>opener</option>
				<option>top</option>
				<option>parent</option>
				<option>frames</option>
			</select>
			<input type=button value="Add" onclick="creat_add();"> 
			<br>
		<td rowspan=5>

			<input type=radio name="browser" value="firefox" checked > Firefox
			<br>
			<input type=radio name="browser" value="webkit" > Webkit
			<br>
			<input type=button value="Update" onClick="update()">
			<br>
			<textarea id=code cols="52" rows="15"></textarea>
			<br>

			</td>
		</tr>
		<tr>
		<td>
			<input type=radio name="type" value="object" checked > Object
			<br>
			<input type=radio name="type" value="attribute" > Attribute
			<br>
			<input type=radio name="type" value="method" > Method
			<br>
		</td>
		</tr>
		<tr>
		<td>
			<input type=button value="get_attribute" onClick="">
		</td>
		</tr>
		<tr>
		<td>
			<input type=button value="get_method" onClick="">
		</td>
		</tr>
		<tr>
		<td>
			Result:
			<br>
			<input type=text value="" id="result">
		</td>
		</tr>		
		<tr>
		<td colspan=2>
			URL: <input type=text id="url" SIZE=60 >
			<br>
			JS: 
			<br>
			<input type=button value="Run" onClick="run()">			
		</td>
		</tr>
		<tr>
		<td colspan=2>
			<textarea id=coderun cols="52" rows="15"></textarea>			
		</td>		
		</tr>
	</table>
			</form>	
</body>
</html>